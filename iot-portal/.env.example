# INSA Advanced IIoT Platform - Environment Configuration Template
# Version: 2.0
# Updated: October 28, 2025
#
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Update the values with your actual configuration
# 3. Never commit .env to version control

# ============================================================================
# Application Configuration
# ============================================================================
FLASK_ENV=production
FLASK_APP=app_advanced.py
FLASK_DEBUG=False
SECRET_KEY=your-secret-key-here-change-in-production
JWT_SECRET_KEY=your-jwt-secret-key-here-change-in-production

# Server Configuration
HOST=0.0.0.0
PORT=5002

# ============================================================================
# Database Configuration
# ============================================================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=insa_iiot
DB_USER=iiot_user
DB_PASSWORD=iiot_secure_2025
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Test Database (for pytest)
TEST_DB_NAME=insa_iiot_test

# ============================================================================
# Redis Cache Configuration
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=50

# Cache Settings
CACHE_TTL=300
CACHE_ENABLED=True

# ============================================================================
# MQTT Broker Configuration
# ============================================================================
MQTT_BROKER_HOST=localhost
MQTT_BROKER_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_KEEPALIVE=60
MQTT_QOS=1

# MQTT Topics
MQTT_TOPIC_PREFIX=insa/iiot
MQTT_TOPIC_TELEMETRY=${MQTT_TOPIC_PREFIX}/telemetry/#
MQTT_TOPIC_COMMANDS=${MQTT_TOPIC_PREFIX}/commands/#
MQTT_TOPIC_STATUS=${MQTT_TOPIC_PREFIX}/status/#

# ============================================================================
# WebSocket Configuration
# ============================================================================
WEBSOCKET_ENABLED=True
WEBSOCKET_CORS_ORIGINS=*
WEBSOCKET_PING_TIMEOUT=60
WEBSOCKET_PING_INTERVAL=25

# ============================================================================
# Email Notification Configuration
# ============================================================================
SMTP_HOST=localhost
SMTP_PORT=25
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=False
SMTP_FROM_EMAIL=noreply@insa.com
SMTP_FROM_NAME=INSA IIoT Platform

# Email Recipients
ALERT_EMAIL_TO=admin@insa.com
ALERT_EMAIL_CC=

# ============================================================================
# Webhook Configuration
# ============================================================================
WEBHOOK_TIMEOUT=10
WEBHOOK_MAX_RETRIES=3
WEBHOOK_RETRY_DELAY=5

# Webhook Security
WEBHOOK_HMAC_SECRET=your-webhook-secret-here
WEBHOOK_ALLOW_PRIVATE_IPS=False

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
RATELIMIT_ENABLED=True
RATELIMIT_STORAGE_URL=redis://localhost:6379/1
RATELIMIT_DEFAULT=100/hour
RATELIMIT_LOGIN=5/minute
RATELIMIT_API=60/minute

# ============================================================================
# JWT Configuration
# ============================================================================
JWT_ACCESS_TOKEN_EXPIRES=3600
JWT_REFRESH_TOKEN_EXPIRES=604800
JWT_ALGORITHM=HS256

# ============================================================================
# Grafana Integration
# ============================================================================
GRAFANA_URL=http://100.100.101.1:3002
GRAFANA_API_KEY=your-grafana-api-key-here
GRAFANA_DATASOURCE_UID=postgres-datasource

# ============================================================================
# Rule Engine Configuration
# ============================================================================
RULE_ENGINE_ENABLED=True
RULE_ENGINE_INTERVAL=30
RULE_ENGINE_MAX_WORKERS=4

# ============================================================================
# Analytics Configuration
# ============================================================================
ANALYTICS_WINDOW_SIZE=100
ANALYTICS_MIN_SAMPLES=10
ANALYTICS_FORECAST_PERIODS=10

# ============================================================================
# Security Configuration
# ============================================================================
# Password Policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=True
PASSWORD_REQUIRE_LOWERCASE=True
PASSWORD_REQUIRE_DIGIT=True
PASSWORD_REQUIRE_SPECIAL=False

# Session Security
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Lax

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_FILE=/tmp/insa-iiot-advanced.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# ============================================================================
# Performance Configuration
# ============================================================================
MAX_CONTENT_LENGTH=16777216
REQUEST_TIMEOUT=30
WORKER_PROCESSES=4

# ============================================================================
# Feature Flags
# ============================================================================
FEATURE_ANALYTICS_ENABLED=True
FEATURE_RBAC_ENABLED=True
FEATURE_RATE_LIMITING_ENABLED=True
FEATURE_SWAGGER_ENABLED=True
FEATURE_WEBHOOKS_ENABLED=True
FEATURE_MQTT_ENABLED=True
FEATURE_WEBSOCKET_ENABLED=True
